<!DOCTYPE html>
<!--------------------------------------------------------->
<!-- Prof R CV lect7 Image Processing Convultion Filters -->
<!--------------------------------------------------------->

<html>
    <head>
        <select id="mymenu" size = "3">
            <option value = "0">No Filter</option>
            <option value = "1">Box Blur</option>
            <option value = "2">Triangle Blur</option>
        </select>

        <script id="vertex-shader" type="x-shader/x-vertex">
            #version 300 es

            in  vec2 vPosition; 
            in  vec2 vTexCoord; 
            out vec2 fTexCoord; 

            uniform mat4 P; 

            void main()
            {
                fTexCoord = vTexCoord; 
                gl_Position = P * vec4(vPosition, 0, 1); 
            }
        </script>

        <script id="fragment-shader" type="x-shader/x-fragment">
            #version 300 es
            precision mediump float; 

            in vec2 fTexCoord; 
            out vec4 fColor; 

            uniform sampler2D texMap; 
            uniform vec3 dimAndKernelWeight; 
            uniform float kernel[9]; 
            uniform float brightness; 

            void main()
            {
                vec2 onePixel = vec2(1.0/dimAndKernelWeight[0], 1.0/dimAndKernelWeight[1]);

                vec4 colorSum = 
                texture(texMap, fTexCoord + onePixel * vec2(-1, -1)) * kernel[0] +
                texture(texMap, fTexCoord + onePixel * vec2( 0, -1)) * kernel[1] +
                texture(texMap, fTexCoord + onePixel * vec2( 1, -1)) * kernel[2] +
                texture(texMap, fTexCoord + onePixel * vec2(-1,  0)) * kernel[3] +
                texture(texMap, fTexCoord + onePixel * vec2( 0,  0)) * kernel[4] +
                texture(texMap, fTexCoord + onePixel * vec2( 1,  0)) * kernel[5] +
                texture(texMap, fTexCoord + onePixel * vec2(-1,  1)) * kernel[6] +
                texture(texMap, fTexCoord + onePixel * vec2( 0,  1)) * kernel[7] +
                texture(texMap, fTexCoord + onePixel * vec2( 1,  1)) * kernel[8] ;

                fColor = vec4((colorSum / dimAndKernelWeight[2]).rgb, 1.0);
            }
        </script>

        <script type="text/javascript" src="../Common/initShaders.js"></script>
        <script type="text/javascript" src="../Common/MVnew.js"></script>
        <script type="text/javascript" src="image_processing_2.js"></script>

    </head>

    <body>
        <canvas id="gl-canvas" width = "1280" height = "720">
            Oops ... your browser doesn't support the HTML5 canvas element
        </canvas>
        <img id="texImage" src="rose_noise.png" hidden></img>
    </body>
</html>